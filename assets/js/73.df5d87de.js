(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{368:function(a,s,t){"use strict";t.r(s);var n=t(4),r=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"_1秒将本地springboot项目jar包部署到linux环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1秒将本地springboot项目jar包部署到linux环境"}},[a._v("#")]),a._v(" 1秒将本地SpringBoot项目jar包部署到Linux环境")]),a._v(" "),s("blockquote",[s("p",[a._v("作者："),s("a",{attrs:{href:"https://blog.csdn.net/weixin_43811294?type=blog",target:"_blank",rel:"noopener noreferrer"}},[a._v("are you ok?"),s("OutboundLink")],1),a._v("，"),s("a",{attrs:{href:"https://wx.zsxq.com/dweb2/index/group/51122858222824",target:"_blank",rel:"noopener noreferrer"}},[a._v("编程导航星球"),s("OutboundLink")],1),a._v(" 编号 589")])]),a._v(" "),s("p",[a._v("在IDEA编辑器中"),s("code",[a._v("一键")]),a._v("将本地已经打包好的"),s("code",[a._v("SpringBoot")]),a._v("项目部署到"),s("code",[a._v("linux")]),a._v("环境，实现"),s("code",[a._v("秒级")]),a._v("部署")]),a._v(" "),s("h2",{attrs:{id:"目标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目标"}},[a._v("#")]),a._v(" 目标")]),a._v(" "),s("blockquote",[s("p",[a._v("在IDEA编辑器中"),s("code",[a._v("一键")]),a._v("将本地已经打包好的"),s("code",[a._v("SpringBoot")]),a._v("项目部署到"),s("code",[a._v("linux")]),a._v("环境，实现"),s("code",[a._v("秒级")]),a._v("部署 前置知识：需掌握Maven的打包")])]),a._v(" "),s("h2",{attrs:{id:"迭代步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#迭代步骤"}},[a._v("#")]),a._v(" 迭代步骤")]),a._v(" "),s("blockquote",[s("ol",[s("li",[a._v("在windows环境使用命令启动SpringBoot项目")]),a._v(" "),s("li",[a._v("在Linux环境使用命令启动项目")]),a._v(" "),s("li",[a._v("在Linux环境使用脚本启动项目")]),a._v(" "),s("li",[a._v("优化脚本，每次启动时先关闭旧项目")]),a._v(" "),s("li",[a._v("分离依赖，每次上传Linux环境只上传几百k的代码包")]),a._v(" "),s("li",[a._v("搭配IDEA插件，实现在IDEA中一键部署启动")])])]),a._v(" "),s("h2",{attrs:{id:"一、前提-有一个windows环境可以启动的springboot项目jar包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、前提-有一个windows环境可以启动的springboot项目jar包"}},[a._v("#")]),a._v(" 一、前提：有一个Windows环境可以启动的SpringBoot项目jar包")]),a._v(" "),s("h3",{attrs:{id:"_1、使用maven的package命令打出一个携带依赖的jar包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、使用maven的package命令打出一个携带依赖的jar包"}},[a._v("#")]),a._v(" 1、使用Maven的package命令打出一个携带依赖的jar包")]),a._v(" "),s("p",[a._v("例如：")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401307.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_2、window启动jar包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、window启动jar包"}},[a._v("#")]),a._v(" 2、Window启动jar包")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" SpringBootTest-0.0.1-SNAPSHOT.jar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401258.png",loading:"lazy"}})]),a._v(" "),s("blockquote",[s("p",[a._v("启动完毕，说明jar包是可以正常启动的。")])]),a._v(" "),s("h2",{attrs:{id:"二、linux环境启动jar包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、linux环境启动jar包"}},[a._v("#")]),a._v(" 二、linux环境启动jar包")]),a._v(" "),s("h3",{attrs:{id:"_1、先将jar包扔到linux环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、先将jar包扔到linux环境"}},[a._v("#")]),a._v(" 1、先将jar包扔到linux环境")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401285.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_2、测试是否可以启动-需要有java环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、测试是否可以启动-需要有java环境"}},[a._v("#")]),a._v(" 2、测试是否可以启动（需要有Java环境）")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" SpringBootTest-0.0.1-SNAPSHOT.jar \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401341.png",loading:"lazy"}})]),a._v(" "),s("blockquote",[s("p",[a._v("说明在Linux环境也是可以正常启动的")]),a._v(" "),s("p",[a._v("但是以上的启动方式有个问题，窗口一关项目就自动关闭了")])]),a._v(" "),s("h3",{attrs:{id:"_3、优化启动脚本-改为后台启动-并将日志输出到springboot-log"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、优化启动脚本-改为后台启动-并将日志输出到springboot-log"}},[a._v("#")]),a._v(" 3、优化启动脚本，改为后台启动，并将日志输出到"),s("code",[a._v("springboot.log")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" SpringBootTest-0.0.1-SNAPSHOT.jar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" springboot.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 解释")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 'nohup': 用于在后台运行命令，并将其与当前终端会话脱离，即使关闭终端，命令也将继续在后台运行。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# '> springboot.log'：此部分使用重定向操作符 > 将标准输出重定向到 springboot.log 文件中。程序的标准输出将被写入到 springboot.log 文件中，而不会在终端上显示。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# '2>&1'：此部分使用重定向操作符 2>&1 将标准错误（stderr）重定向到标准输出（stdout），即将标准错误与标准输出一起写入到 springboot.log 文件中。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# '&'：最后一个 & 操作符将命令置于后台运行，使得程序在后台持续运行，而不会阻塞当前终端会话。")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401286.png",loading:"lazy"}})]),a._v(" "),s("blockquote",[s("p",[a._v("启动成功，进程号为9777")]),a._v(" "),s("p",[a._v("以上的脚本也存在问题，第二次启动的时候，会因为已经启动了一个服务，端口占用启动不了")])]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401388.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_4、完善脚本-启动时-如果存在已经启动的服务-先关闭-再启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、完善脚本-启动时-如果存在已经启动的服务-先关闭-再启动"}},[a._v("#")]),a._v(" 4、完善脚本，启动时，如果存在已经启动的服务，先关闭，再启动")]),a._v(" "),s("p",[a._v("创建脚本")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" start.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("脚本内容")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 关闭程序")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# fileName为jar包的名称")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("fileName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("SpringBootTest-0.0.1-SNAPSHOT.jar\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("pid")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ef")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" $fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"grep"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $2}'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-9")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$pid")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动项目")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$fileName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" springboot.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("之后，启动项目就可以")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" start.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("blockquote",[s("p",[a._v("至此，SpringBoot项目在Linux的启动就说明完毕。")])]),a._v(" "),s("p",[a._v("但是，以上的部署方式还存在一些问题，在只有web依赖的时候，jar的大小就已经达到17M，")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401070.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("而在实际开发中，jar包的大小甚至会到达一百多兆。例如这样：")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401092.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("为什么明明没有多少代码，包的大小却这么大呢？")]),a._v(" "),s("p",[a._v("解压SpringBootTest-0.0.1-SNAPSHOT.jar包查看内容")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401196.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("可以看出，lib文件夹占用了16.7M，而lib文件夹里面是什么东西呢？")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401265.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("可以看到，就是各种的依赖。")]),a._v(" "),s("p",[a._v("所以，就引发了新的优化方向，能不能将依赖包直接放在服务器上，每次只更新自己的代码？")]),a._v(" "),s("p",[a._v("答案是：可以！在实际开发中，依赖包一般来说是不会动的，于是开始第三步。")]),a._v(" "),s("h2",{attrs:{id:"三、分离依赖部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、分离依赖部署"}},[a._v("#")]),a._v(" 三、分离依赖部署")]),a._v(" "),s("h3",{attrs:{id:"_1-上传依赖jar包linux服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-上传依赖jar包linux服务器"}},[a._v("#")]),a._v(" 1.上传依赖jar包Linux服务器")]),a._v(" "),s("p",[a._v("（1）创建lib文件夹")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" lib\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401145.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("（2）将jar包中的"),s("code",[a._v("/BOOT-INF/lib")]),a._v("目录底下的jar包全部上传到Linux服务器的lib文件夹")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401338.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_2-改造项目的pom-xml文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-改造项目的pom-xml文件"}},[a._v("#")]),a._v(" 2.改造项目的pom.xml文件")]),a._v(" "),s("p",[a._v("增加配置：")]),a._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[a._v("    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- 解决jar中没有主清单属性问题 --\x3e")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.boot"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-boot-maven-plugin"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("configuration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("mainClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("com.example.springboottest.SpringBootTestApplication"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("mainClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- jar包不携带依赖配置开始--\x3e")]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("layout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("ZIP"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("layout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("includes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("nothing"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("nothing"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("includes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- jar包不携带依赖部署配置结束--\x3e")]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("configuration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("executions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("execution")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("goals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("goal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("repackage"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("goal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("goals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("execution")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("executions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("plugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br")])]),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401738.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_3-重新package"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-重新package"}},[a._v("#")]),a._v(" 3.重新package")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401927.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("新生成的jar包仅仅只有==156kb==！")]),a._v(" "),s("h3",{attrs:{id:"_4-上传到服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-上传到服务器"}},[a._v("#")]),a._v(" 4.上传到服务器")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401884.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("这时候，如果使用原本的脚本启动就会报错：")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401018.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_5-使用-dloader-path指定外部依赖包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-使用-dloader-path指定外部依赖包"}},[a._v("#")]),a._v(" 5.使用-Dloader.path指定外部依赖包")]),a._v(" "),s("p",[a._v("（1）增加启动文件"),s("code",[a._v("start2.sh")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" start.sh start2.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("（2）在java -jar后追加"),s("code",[a._v("-Dloader.path=./lib")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 关闭程序")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("fileName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("SpringBootTest-0.0.1-SNAPSHOT.jar\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("pid")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ef")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" $fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"grep"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $2}'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-9")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$pid")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动项目")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dloader.path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./lib  "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$fileName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" springboot.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("p",[a._v("使用外部依赖启动成功")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401241.png",loading:"lazy"}})]),a._v(" "),s("blockquote",[s("p",[a._v("到此，使用外部依赖启动就完成了，只要加上"),s("code",[a._v("-Dloader.path=./lib")]),a._v("就可以了")])]),a._v(" "),s("h3",{attrs:{id:"_6-合并start-sh和start2-sh脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-合并start-sh和start2-sh脚本"}},[a._v("#")]),a._v(" 6.合并"),s("code",[a._v("start.sh")]),a._v("和"),s("code",[a._v("start2.sh")]),a._v("脚本")]),a._v(" "),s("blockquote",[s("p",[a._v("第五步还存在的一个问题，虽然这个方法很好用，但是又增加了一个脚本。公司内部，总是有人想要打全量包，使用自带的依赖，有的人想要打不携带依赖的包，可以快速部署启动，这时候，就需要区分，到底是要用"),s("code",[a._v("start.sh")]),a._v("脚本还是"),s("code",[a._v("start2.sh")]),a._v("脚本，于是，将"),s("code",[a._v("start.sh")]),a._v("和"),s("code",[a._v("start2.sh")]),a._v("脚本进行合并，大于10M的时候，就使用内部依赖，小于10M的时候就使用外部依赖")])]),a._v(" "),s("p",[a._v("合并后的start.sh脚本：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 关闭程序")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("fileName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("SpringBootTest-0.0.1-SNAPSHOT.jar\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("pid")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ef")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" $fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"grep"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $2}'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-9")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$pid")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 获取jar包的大小")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("filesize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" $fileName "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{ print $5 }'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 多少M以上使用外部依赖")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("maxsize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$((")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1024")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1024")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("))")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 10M")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$filesize")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-gt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$maxsize")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"文件大小为【'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$filesize")]),a._v('】，使用内部依赖启动"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dloader.path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./lib  "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$fileName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" springboot.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"文件大小为【'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$filesize")]),a._v('】,使用外部依赖启动"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nohup")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$fileName")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" springboot.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br")])]),s("p",[a._v("适配两种情况")]),a._v(" "),s("p",[a._v("小于10M的jar包使用外部依赖 "),s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401004.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("大于10M的jar包使用内部依赖")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401712.png",loading:"lazy"}})]),a._v(" "),s("blockquote",[s("p",[a._v("在第三步优化完之后，jar包的大小大大减少，只剩下1M都不到，每次上传耗时不到1s，还能不能继续优化呢？")]),a._v(" "),s("p",[a._v("答案也是可以！当前还存在的问题是：")]),a._v(" "),s("p",[a._v("1、需要手动选择文件上传。")]),a._v(" "),s("p",[a._v("2、需要手动执行脚本")]),a._v(" "),s("p",[a._v("于是，进行第四步优化，引入Alibaba Cloud Toolkit插件")])]),a._v(" "),s("h2",{attrs:{id:"四、搭配alibaba-cloud-toolkit插件使用-实现一键上传文件-并执行脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、搭配alibaba-cloud-toolkit插件使用-实现一键上传文件-并执行脚本"}},[a._v("#")]),a._v(" 四、搭配Alibaba Cloud Toolkit插件使用，实现一键上传文件，并执行脚本")]),a._v(" "),s("h3",{attrs:{id:"_1、idea安装alibaba-cloud-toolkit插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、idea安装alibaba-cloud-toolkit插件"}},[a._v("#")]),a._v(" 1、IDEA安装Alibaba Cloud Toolkit插件")]),a._v(" "),s("p",[a._v("1.1 从插件市场中下载Alibaba Cloud Toolkit插件，并重启IDEA。")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401816.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_2-配置服务器地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置服务器地址"}},[a._v("#")]),a._v(" 2.配置服务器地址")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401692.png",loading:"lazy"}})]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051404319.png",loading:"lazy"}})]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401922.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("可以看到就增加了一条新的配置")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401912.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_3-配置上传地址和执行的命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置上传地址和执行的命令"}},[a._v("#")]),a._v(" 3.配置上传地址和执行的命令")]),a._v(" "),s("p",[a._v("查看所在路径")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401414.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("点击上传，配置上传的文件、上传地址以及执行的脚本")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401402.png",loading:"lazy"}})]),a._v(" "),s("p",[a._v("填加执行命令")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401556.png",loading:"lazy"}})]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401820.png",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"_4-点击upload按钮"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-点击upload按钮"}},[a._v("#")]),a._v(" 4.点击Upload按钮")]),a._v(" "),s("h2",{attrs:{id:"成果-1秒部署springboot项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#成果-1秒部署springboot项目"}},[a._v("#")]),a._v(" 成果：1秒部署SpringBoot项目")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051401815.png",loading:"lazy"}})]),a._v(" "),s("blockquote",[s("p",[a._v("提示：由于该插件安装后会在IDEA的左右侧边栏出现好几个其他的功能按钮，可以将他们移除，只留下底下的上传功能。")])]),a._v(" "),s("p",[a._v("操作方式：")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202312051405408.png",loading:"lazy"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{393:function(s,t,a){"use strict";a.r(t);var r=a(4),e=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"oracle-到-mysql-函数替换方案汇总"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oracle-到-mysql-函数替换方案汇总"}},[s._v("#")]),s._v(" Oracle 到 MySQL 函数替换方案汇总")]),s._v(" "),t("blockquote",[t("p",[s._v("作者："),t("a",{attrs:{href:"https://wx.zsxq.com/dweb2/index/footprint/585151241212124",target:"_blank",rel:"noopener noreferrer"}},[s._v("゛my my me"),t("OutboundLink")],1),s._v("，"),t("a",{attrs:{href:"https://wx.zsxq.com/dweb2/index/group/51122858222824",target:"_blank",rel:"noopener noreferrer"}},[s._v("编程导航星球"),t("OutboundLink")],1),s._v(" 编号 30129")])]),s._v(" "),t("p",[s._v("在我最近的项目中，我们面临了一个具有挑战性的任务：将数据库从Oracle迁移到MySQL 5.7版本。这个过程中的主要难点是将Oracle数据库中的函数和语法转换为与MySQL兼容的格式。在此过程中，我们整理出了一份涵盖常用语法转换的指南，希望能对类似项目的迁移工作提供有价值的参考和帮助。")]),s._v(" "),t("h2",{attrs:{id:"常用函数和语法转换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用函数和语法转换"}},[s._v("#")]),s._v(" 常用函数和语法转换")]),s._v(" "),t("h3",{attrs:{id:"nvl函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nvl函数"}},[s._v("#")]),s._v(" NVL函数")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("NVL(COUNT(*), 0)")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("IFNULL(COUNT(*), 0)")])])]),s._v(" "),t("h3",{attrs:{id:"转字符串"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#转字符串"}},[s._v("#")]),s._v(" 转字符串")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("to_char(字段)")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("CONVERT(字段, CHAR)")])])]),s._v(" "),t("h3",{attrs:{id:"rownum递增"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rownum递增"}},[s._v("#")]),s._v(" Rownum递增")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("SELECT rownum num FROM SYS_ENUM")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("SELECT (@i:=@i+1) num FROM sys_enum, (SELECT @i:=0) AS it")])])]),s._v(" "),t("h3",{attrs:{id:"delete增加表别名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delete增加表别名"}},[s._v("#")]),s._v(" Delete增加表别名")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("DELETE from sys_menus s WHERE s.MENU_ID in (86,87,88);")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("DELETE s from sys_menus s WHERE s.MENU_ID in (86,87,88);")])])]),s._v(" "),t("h3",{attrs:{id:"日期和字符转换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日期和字符转换"}},[s._v("#")]),s._v(" 日期和字符转换")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("to_char(), to_date();")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("DATE_FORMAT(date, '%Y-%m-%d'), STR_TO_DATE(date, '%Y-%m-%d %H:%i:%s')")])])]),s._v(" "),t("h3",{attrs:{id:"uuid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uuid"}},[s._v("#")]),s._v(" UUID")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("sys_guid()")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("REPLACE(UUID(), _utf8'-', _utf8'')")])])]),s._v(" "),t("h3",{attrs:{id:"特殊字符转换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特殊字符转换"}},[s._v("#")]),s._v(" 特殊字符转换")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("to_char(SALARY_NUM, 'fm99999999999990.00')")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("CONVERT(FORMAT(SALARY_NUM, 2), CHAR)")])])]),s._v(" "),t("h3",{attrs:{id:"按拼音首字母排序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#按拼音首字母排序"}},[s._v("#")]),s._v(" 按拼音首字母排序")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("nlssort(enterprise_name, 'NLS_SORT=SCHINESE_PINYIN_M')")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("convert(name using gbk) ASC")])])]),s._v(" "),t("h3",{attrs:{id:"trunc函数截取月初"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trunc函数截取月初"}},[s._v("#")]),s._v(" Trunc函数截取月初")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("trunc(sysdate, 'yyyy-MM-dd'), 'mm')")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("DATE_ADD(sysdate(), INTERVAL -DAY(sysdate()) +1 DAY)")])])]),s._v(" "),t("h3",{attrs:{id:"trunc函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trunc函数"}},[s._v("#")]),s._v(" Trunc函数")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("trunc(sysdate)")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("SELECT STR_TO_DATE(DATE_FORMAT(SYSDATE(), '%Y%m%d'), '%Y%m%d%H')")])])]),s._v(" "),t("h3",{attrs:{id:"rownum日期操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rownum日期操作"}},[s._v("#")]),s._v(" Rownum日期操作")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("sysdate-1")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("set @dt =SYSDATE(); select date_add(@dt, interval 1 day) from dual;")])])]),s._v(" "),t("h3",{attrs:{id:"decode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#decode"}},[s._v("#")]),s._v(" Decode")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("DECODE(t.CARD_STATUS, 1, '01', 6, '06', 2, '02', 4, '04', null) as CWR_CARD_STATUS")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("(CASE WHEN t.CARD_STATUS = 1 THEN '01' WHEN t.CARD_STATUS = 6 THEN '06' WHEN t.CARD_STATUS = 2 THEN '02' WHEN t.CARD_STATUS = 4 THEN '04' ELSE null END) as CWR_CARD_STATUS")])])]),s._v(" "),t("h3",{attrs:{id:"nulls-last"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nulls-last"}},[s._v("#")]),s._v(" Nulls Last")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("nulls last")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("order by IF(ISNULL(my_field), 1, 0), my_field;")])])]),s._v(" "),t("h3",{attrs:{id:"nulls-first"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nulls-first"}},[s._v("#")]),s._v(" Nulls First")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("nulls first")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("order by IF(ISNULL(my_field), 0, 1), my_field;")])])]),s._v(" "),t("h3",{attrs:{id:"to-char-数字格式化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#to-char-数字格式化"}},[s._v("#")]),s._v(" To_char（数字格式化）")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("to_char（数据, 'FM9999990.00'）")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("format(数据, 2)")])])]),s._v(" "),t("h3",{attrs:{id:"merge-into"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#merge-into"}},[s._v("#")]),s._v(" Merge Into")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("merge into")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": `-- 修改成UPDATE 和 INSERT")])]),s._v(" "),t("h3",{attrs:{id:"文本拼接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文本拼接"}},[s._v("#")]),s._v(" 文本拼接")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": "),t("code",[s._v("||")])]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("CONCAT('1','2''3')")])])]),s._v(" "),t("h3",{attrs:{id:"substr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#substr"}},[s._v("#")]),s._v(" substr")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("注意")]),s._v(": MySQL中不能将0作为起始点，需要改成1。")])]),s._v(" "),t("h3",{attrs:{id:"时间的计算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#时间的计算"}},[s._v("#")]),s._v(" 时间的计算")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Oracle语法")]),s._v(": 可以直接相减（默认单位：天）")]),s._v(" "),t("li",[t("strong",[s._v("MySQL语法")]),s._v(": "),t("code",[s._v("使用 TIMESTAMPDIFF（需指定默认单位）")])])]),s._v(" "),t("h3",{attrs:{id:"row-number-over"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#row-number-over"}},[s._v("#")]),s._v(" row number over")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("Oracle语法")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nROW_NUMBER"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OVER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("orderchildId "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CheckEndTime "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" rum_num\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" biz_qa_check_first a\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("MySQL语法")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rownum")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rownum")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" rownum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@orderchildId")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("orderchildId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rank")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rank")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rank")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" rum_num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@orderchildId")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("orderchildId\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" biz_qa_check_first "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" orderchildId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("CheckEndTimedesc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rownum")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@orderchildId")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@rank")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("b\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);
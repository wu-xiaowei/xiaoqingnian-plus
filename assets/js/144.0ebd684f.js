(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{443:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"åŸºäº-redis-å®ç°çŸ­ä¿¡ç™»å½•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŸºäº-redis-å®ç°çŸ­ä¿¡ç™»å½•"}},[s._v("#")]),s._v(" åŸºäº Redis å®ç°çŸ­ä¿¡ç™»å½•")]),s._v(" "),t("blockquote",[t("p",[s._v("ä½œè€…ï¼š"),t("a",{attrs:{href:"https://wx.zsxq.com/dweb2/index/footprint/818288821184212",target:"_blank",rel:"noopener noreferrer"}},[s._v("å¯’æœˆ"),t("OutboundLink")],1),s._v("ï¼Œ"),t("a",{attrs:{href:"https://wx.zsxq.com/dweb2/index/group/51122858222824",target:"_blank",rel:"noopener noreferrer"}},[s._v("ç¼–ç¨‹å¯¼èˆªæ˜Ÿçƒ"),t("OutboundLink")],1),s._v(" ç¼–å· 11102")])]),s._v(" "),t("p",[s._v("ä½¿ç”¨rediså®ç°çŸ­ä¿¡ç™»å½•")]),s._v(" "),t("p",[s._v("ç›®å½•")]),s._v(" "),t("p",[s._v("ä¸€ã€è®¾è®¡Keyçš„ç»“æ„")]),s._v(" "),t("p",[s._v("äºŒã€è®¿é—®æµç¨‹")]),s._v(" "),t("p",[s._v("ä¸‰ã€ä»£ç å®ç°")]),s._v(" "),t("h1",{attrs:{id:"ä¸€ã€è®¾è®¡keyçš„ç»“æ„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€è®¾è®¡keyçš„ç»“æ„"}},[s._v("#")]),s._v(" ä¸€ã€è®¾è®¡Keyçš„ç»“æ„")]),s._v(" "),t("p",[s._v("é¦–å…ˆæˆ‘ä»¬è¦æ€è€ƒä¸€ä¸‹åˆ©ç”¨redisæ¥å­˜å‚¨æ•°æ®ï¼Œé‚£ä¹ˆåˆ°åº•ä½¿ç”¨å“ªç§ç»“æ„å‘¢ï¼Ÿç”±äºå­˜å…¥çš„æ•°æ®æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨Stringï¼Œæˆ–è€…æ˜¯ä½¿ç”¨å“ˆå¸Œï¼Œå¦‚ä¸‹å›¾ï¼Œå¦‚æœä½¿ç”¨Stringï¼ŒåŒå­¦ä»¬æ³¨æ„ä»–çš„valueï¼Œè¦å¤šå ç”¨ä¸€ç‚¹ç©ºé—´ï¼Œå¦‚æœä½¿ç”¨å“ˆå¸Œï¼Œåˆ™ä»–çš„valueä¸­åªä¼šå­˜å‚¨ä»–æ•°æ®æœ¬èº«ï¼Œå¦‚æœä¸æ˜¯ç‰¹åˆ«åœ¨æ„å†…å­˜ï¼Œå…¶å®ä½¿ç”¨Stringå°±å¯ä»¥å•¦ã€‚")]),s._v(" "),t("p",[s._v("æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Stringç»“æ„ï¼Œå°±æ˜¯ä¸€ä¸ªç®€å•çš„keyï¼Œvalueé”®å€¼å¯¹çš„æ–¹å¼ï¼Œä½†æ˜¯å…³äºkeyçš„å¤„ç†ï¼Œsessionä»–æ˜¯æ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„sessionï¼Œä½†æ˜¯redisçš„keyæ˜¯å…±äº«çš„ï¼Œå’±ä»¬å°±ä¸èƒ½ä½¿ç”¨codeäº†")]),s._v(" "),t("blockquote",[t("p",[s._v("åœ¨è®¾è®¡è¿™ä¸ªkeyçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹‹å‰è®²è¿‡éœ€è¦æ»¡è¶³ä¸¤ç‚¹")]),s._v(" "),t("p",[s._v("1ã€keyè¦å…·æœ‰å”¯ä¸€æ€§")]),s._v(" "),t("p",[s._v("2ã€keyè¦æ–¹ä¾¿æºå¸¦")])]),s._v(" "),t("p",[s._v("å¦‚æœæˆ‘ä»¬é‡‡ç”¨phoneï¼šæ‰‹æœºå·è¿™ä¸ªçš„æ•°æ®æ¥å­˜å‚¨å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœæŠŠè¿™æ ·çš„æ•æ„Ÿæ•°æ®å­˜å‚¨åˆ°redisä¸­å¹¶ä¸”ä»é¡µé¢ä¸­å¸¦è¿‡æ¥æ¯•ç«Ÿä¸å¤ªåˆé€‚ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åå°ç”Ÿæˆä¸€ä¸ªéšæœºä¸²tokenï¼Œç„¶åè®©å‰ç«¯å¸¦æ¥è¿™ä¸ªtokenå°±èƒ½å®Œæˆæˆ‘ä»¬çš„æ•´ä½“é€»è¾‘äº†")]),s._v(" "),t("h1",{attrs:{id:"äºŒã€è®¿é—®æµç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€è®¿é—®æµç¨‹"}},[s._v("#")]),s._v(" äºŒã€è®¿é—®æµç¨‹")]),s._v(" "),t("p",[s._v("å½“æ³¨å†Œå®Œæˆåï¼Œç”¨æˆ·å»ç™»å½•ä¼šå»æ ¡éªŒç”¨æˆ·æäº¤çš„æ‰‹æœºå·å’ŒéªŒè¯ç ï¼Œæ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™æ ¹æ®æ‰‹æœºå·æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œä¸å­˜åœ¨åˆ™æ–°å»ºï¼Œæœ€åå°†ç”¨æˆ·æ•°æ®ä¿å­˜åˆ°redisï¼Œå¹¶ä¸”ç”Ÿæˆtokenä½œä¸ºredisçš„keyï¼Œå½“æˆ‘ä»¬æ ¡éªŒç”¨æˆ·æ˜¯å¦ç™»å½•æ—¶ï¼Œä¼šå»æºå¸¦ç€tokenè¿›è¡Œè®¿é—®ï¼Œä»redisä¸­å–å‡ºtokenå¯¹åº”çš„valueï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ‹¦æˆªï¼Œå¦‚æœå­˜åœ¨åˆ™å°†å…¶ä¿å­˜")]),s._v(" "),t("p",[s._v("ä¸‰ã€ä»£ç å®ç° å…ˆåŠ å…¥é…ç½®")]),s._v(" "),t("div",{staticClass:"language-nestedtext line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("spring:\n   redis:\n     host: xxxxxxxx\n     port: xxx\n     password: xxxxx\n     lettuce:\n       pool:\n         max-active: 10\n         max-idle: 10\n         min-idle: 1\n         time-between-eviction-runs: 10s\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"_1ã€å­˜å‚¨éªŒè¯ç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€å­˜å‚¨éªŒè¯ç "}},[s._v("#")]),s._v(" 1ã€å­˜å‚¨éªŒè¯ç ")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGIN_CODE_KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login:code:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGIN_CODE_TTL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2L")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("ä¿®æ”¹serviceå±‚sendcodeæ–¹æ³•")]),s._v(" "),t("div",{staticClass:"language-armasm line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-armasm"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("å£°æ˜å¸¸é‡å\n stringRedisTemplate.opsForValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".set"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LOGIN_CODE_KEY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("code"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("LOGIN_CODE_TTL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" TimeUnit.MINUTES"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("æ‰€ä»¥è¿™é‡Œä¿®æ”¹æˆredisç™»å½•åå‘é€éªŒè¯ç è¿™å—è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„")]),s._v(" "),t("h3",{attrs:{id:"_1-controllerå±‚"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-controllerå±‚"}},[s._v("#")]),s._v(" 1ï¼‰controllerå±‚")]),s._v(" "),t("div",{staticClass:"language-reasonml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('@GetMapping("/code")\n     public Result SendCode(String phone, HttpSession session) {\n         //1ã€æ ¡éªŒæ‰‹æœºå·æ˜¯å¦åˆæ³•\n         if (!RegexUtils.isPhoneInvalid(phone)) {\n             return Result.fail("éªŒè¯ç æ ¼å¼å¼‚å¸¸");\n         }\n         String code = userService.sendCode(phone, session);\n         //Object code1 = session.getAttribute("code");\n         return Result.ok(code);\n     }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"_2-serviceå±‚"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-serviceå±‚"}},[s._v("#")]),s._v(" 2ï¼‰serviceå±‚")]),s._v(" "),t("div",{staticClass:"language-reasonml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('@Override\n     public String sendCode(String phone, HttpSession session) {\n         //1ã€æ ¡éªŒæ‰‹æœºå·æ˜¯å¦åˆæ³•\n         if (!RegexUtils.isPhoneInvalid(phone)) {\n             return "æ‰‹æœºå·æ ¼å¼å¼‚å¸¸";\n         }\n         //2ã€ç”ŸæˆéšæœºéªŒè¯å—\n         String code = RandomUtil.randomNumbers(6);\n         //4ã€ä¿å­˜éªŒè¯ç åˆ°redis\n         //è®¾ç½®keyæœ‰æ•ˆæœŸ2åˆ†é’Ÿ\n         stringRedisTemplate.opsForValue()\n                 .set(LOGIN_CODE_KEY+phone,code,LOGIN_CODE_TTL, TimeUnit.MINUTES);\n         //4ã€æ‰“å°æ—¥å¿—\n         log.debug("å‘é€çŸ­ä¿¡éªŒè¯ç æˆåŠŸï¼ŒéªŒè¯ç :{}", code);\n         //å‰ç«¯æ§åˆ¶å°è¾“å‡º\n         return "éªŒè¯ç å‘é€æˆåŠŸ:"+code;\n     }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("å¯ä»¥çœ‹åˆ°è¿”å›åçš„ç»“æœ")]),s._v(" "),t("p",[s._v("redisä¸­")]),s._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311230843708.png",loading:"lazy"}})]),s._v(" "),t("h3",{attrs:{id:"_3-æ–°å»ºç»“æœè¿”å›ç±»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ–°å»ºç»“æœè¿”å›ç±»"}},[s._v("#")]),s._v(" 3ï¼‰æ–°å»ºç»“æœè¿”å›ç±»")]),s._v(" "),t("p",[s._v("è¿™é‡Œçš„æ–¹æ³•è¿”å›å€¼æœ‰äº›æˆ‘æ”¹æˆäº†Resultï¼Œå› ä¸ºæˆ‘å‘ç°è¿™ä¸ªå…¨å±€ç»Ÿä¸€æ¡†æ¶çš„è¿™ä¸ªä¾èµ–è¿˜æ˜¯ä¸å¤ªå¥½ç”¨ï¼Œåªå¯¹è¯·æ±‚æˆåŠŸæ—¶çš„ç»“æœè¿›è¡Œè¿”å›ï¼Œè€Œå‡ºç°å¼‚å¸¸æˆ–ä¸ºnullçš„æƒ…å†µï¼Œå‰ç«¯ä¸ä¼šæœ‰ä»»ä½•åé¦ˆ")]),s._v(" "),t("div",{staticClass:"language-reasonml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('@Override\n     public String sendCode(String phone, HttpSession session) {\n         //1ã€æ ¡éªŒæ‰‹æœºå·æ˜¯å¦åˆæ³•\n         if (!RegexUtils.isPhoneInvalid(phone)) {\n             return "æ‰‹æœºå·æ ¼å¼å¼‚å¸¸";\n         }\n         //2ã€ç”ŸæˆéšæœºéªŒè¯å—\n         String code = RandomUtil.randomNumbers(6);\n         //4ã€ä¿å­˜éªŒè¯ç åˆ°redis\n         //è®¾ç½®keyæœ‰æ•ˆæœŸ2åˆ†é’Ÿ\n         stringRedisTemplate.opsForValue()\n                 .set(LOGIN_CODE_KEY+phone,code,LOGIN_CODE_TTL, TimeUnit.MINUTES);\n         //4ã€æ‰“å°æ—¥å¿—\n         log.debug("å‘é€çŸ­ä¿¡éªŒè¯ç æˆåŠŸï¼ŒéªŒè¯ç :{}", code);\n         //å‰ç«¯æ§åˆ¶å°è¾“å‡º\n         return "éªŒè¯ç å‘é€æˆåŠŸ:"+code;\n     }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("å‰ç«¯è¿”å›")]),s._v(" "),t("h2",{attrs:{id:"_2ã€ç™»å½•æ ¡éªŒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€ç™»å½•æ ¡éªŒ"}},[s._v("#")]),s._v(" 2ã€ç™»å½•æ ¡éªŒ")]),s._v(" "),t("blockquote",[t("p",[s._v("æˆ‘çš„ç™»å½•é€»è¾‘ï¼š")])]),s._v(" "),t("p",[s._v("-> æ ¡éªŒç”¨æˆ·ç™»å½•æ€â€”â€”å…ˆä»ç¼“å­˜ä¸­è·å–Keyï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ›¾ç™»é™†è¿‡")]),s._v(" "),t("div",{staticClass:"language-gams line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Set<Object> cacheKey = stringRedisTemplate.\n    opsForHash().keys(LOGIN_USER_KEY + phone);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[t("blockquote",[t("p",[s._v("ç™»é™†è¿‡â€”â€”ç›´æ¥æ ¹æ®cacheKeyè·å–ç”¨æˆ·ä¿¡æ¯")])])]),s._v(" "),t("li",[t("blockquote",[t("p",[s._v("æœªæ›¾ç™»é™†è¿‡â€”â€”è¿™é‡Œåˆ†æˆä¸¤ç§æƒ…å†µ")])])]),s._v(" "),t("li",[t("blockquote",[t("p",[s._v("ä¸€ï¼šç”¨æˆ·ä¸ºæ–°ç”¨æˆ·ï¼Œæ•°æ®åº“ä¸­ä¸å­˜åœ¨")])])]),s._v(" "),t("li",[t("blockquote",[t("p",[s._v("äºŒã€ç”¨æˆ·ç™»é™†è¿‡ï¼Œä½†ç¼“å­˜å¤±æ•ˆäº†")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("å¯¹äºè¿™ç§æƒ…å†µï¼Œä»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œ è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ ¡éªŒéªŒè¯ç äº†ï¼Œè¿™é‡Œå°±ç›´æ¥è¯´é€šè¿‡äº†")])]),s._v(" "),t("ol",[t("li",[t("blockquote",[t("p",[s._v("å­˜åœ¨ï¼Œæˆ‘ä»¬å°±åªéœ€è¦è¿›è¡Œç™»å½•æ“ä½œï¼Œç›´æ¥å°†ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºçš„ç”¨æˆ·ä¿¡æ¯å­˜åˆ°ç¼“å­˜ä¸­å°±OKäº†")])])]),s._v(" "),t("li",[t("blockquote",[t("p",[s._v("ä¸å­˜åœ¨ï¼Œå°±è¿›è¡Œæ³¨å†Œæ“ä½œï¼Œåˆ›å»ºæ–°ç”¨æˆ·ï¼Œå°†æ–°ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°æ•°æ®åº“å’Œredisä¸­")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("æ•´ä¸ªé€»è¾‘è¿‡ç¨‹å°±æ˜¯è¿™æ · ä¿®æ”¹loginæ–¹æ³•")])]),s._v(" "),t("p",[s._v("å®šä¹‰å¸¸é‡")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGIN_USER_KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login:token:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGIN_USER_TTL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30L")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_1-serviceå±‚å®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-serviceå±‚å®ç°"}},[s._v("#")]),s._v(" 1ï¼‰serviceå±‚å®ç°")]),s._v(" "),t("div",{staticClass:"language-dart line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dart"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token metadata function"}},[s._v("@Override")]),s._v("\n     public "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserDTO")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginFormDTO")]),s._v(" loginFormDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpSession")]),s._v(" session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//é¦–å…ˆæ ¡éªŒæ‰‹æœºå·å’ŒéªŒè¯ç æ˜¯å¦åˆæ³•")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" phone "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" loginFormDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPhone")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RegexUtils")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isPhoneInvalid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" cacheKey "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForHash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LOGIN_USER_KEY "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åŸºäºtokenè·å–redisä¸­çš„ç”¨æˆ·")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" tokenkey"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOGIN_USER_KEY "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cacheKey "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("cacheKey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("contains")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tokenkey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ ¡éªŒéªŒè¯ç ")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//Object cachecode = session.getAttribute("code");')]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" cachecode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LOGIN_CODE_KEY "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n             "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" dtoCode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" loginFormDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dtoCode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("dtoCode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cachecode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ ¹æ®æ‰‹æœºå·æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryWrapper")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" queryWrapper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("QueryWrapper")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             queryWrapper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("eq")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"phone"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ ¹æ®æŸ¥è¯¢æ¡ä»¶æŸ¥è¯¢æ•°æ®åº“ä¸­æ»¡è¶³ä»¥ä¸Šæ¡ä»¶çš„ç”¨æˆ·")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" userMapper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("selectOne")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("queryWrapper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åˆ›å»ºç”¨æˆ·")]),s._v("\n                 user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreateUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è„±æ•")]),s._v("\n \n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°redisä¸­")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n              * ä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°redisä¸­\n              * 1)éšæœºç”Ÿæˆtokenä½œä¸ºç™»é™†ä»¤ç‰Œ\n              * 2)å°†userå¯¹è±¡è½¬ä¸ºhashå­˜å‚¨\n              * 3)å­˜å‚¨\n              */")]),s._v("\n \n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å°†userå¯¹è±¡è½¬ä¸ºhashå­˜å‚¨")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n              * copyProperties:å±æ€§æ‹·è´â€”â€”æŠŠuserä¸­çš„å±æ€§å­—åŠ¨æ‹·è´åˆ°UserDTOä¸­\n              * BeanUtils:ä½¿ç”¨çš„æ˜¯åŒ…cn.hutool.core.beanä¸‹çš„å·¥å…·ç±»\n              */")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserDTO")]),s._v(" userDTO "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeanUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("copyProperties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserDTO")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userDTO"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" userMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeanUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("beanToMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CopyOptions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setIgnoreNullValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setFieldValueEditor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fieldName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("fieldValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("fieldValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å­˜å‚¨redisä¸­")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//String tokenkey = LOGIN_USER_KEY + loginFormDTO.getPhone();")]),s._v("\n                 stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForHash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("putAll")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tokenkey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("userMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è®¾ç½®tokenæœ‰æ•ˆæœŸâ€”â€”åŠä¸ªå°æ—¶")]),s._v("\n                 stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tokenkey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("LOGIN_USER_TTL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TimeUnit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("MINUTES"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n             "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" userDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n         "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" userMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForHash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("entries")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tokenkey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å°†æŸ¥è¯¢åˆ°çš„hashæ•°æ®è½¬ä¸ºuserDTOå¯¹è±¡")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserDTO")]),s._v(" cacheuser "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BeanUtil")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fillBeanWithMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserDTO")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" cacheuser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br")])]),t("p",[s._v("ä»£ç è§£æï¼š")]),s._v(" "),t("p",[t("strong",[s._v("æˆ‘çš„ç”¨æˆ·ä¿¡æ¯æ˜¯ä»¥mapå½¢å¼å­˜å‚¨çš„ï¼Œæ‰€ä»¥è¿™é‡Œè·å–è¿™ä¸ªkey,éœ€è¦å…ˆè·å–åˆ°æ‰‹æœºå·")])]),s._v(" "),t("div",{staticClass:"language-gams line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    Set<Object> cacheKey = stringRedisTemplate.opsForHash()\n             .keys(LOGIN_USER_KEY + phone);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("ä¸ºä»€ä¹ˆæ˜¯ä»¥æ‰‹æœºå·çš„ä¿¡æ¯ä½œä¸ºkeyè€Œä¸æ˜¯éšæœºçš„tokenå‘¢ï¼Ÿ")]),s._v(" å› ä¸ºtokenæˆ‘ä¸çŸ¥é“æ€ä¹ˆå¼„ï¼ŸğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼Œ åŸæœ¬æ˜¯ä»¥UUIDä½œä¸ºä»¤ç‰Œå­˜å‚¨ç”¨æˆ·ä¿¡æ¯åˆ°redis")]),s._v(" "),t("div",{staticClass:"language-reasonml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    String token = UUID.randomUUID().toString(true);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ä½†é‡åˆ°ä¸€äº›é—®é¢˜")]),s._v(" "),t("blockquote",[t("p",[s._v("è¿™ä¸ªæ ‡è¯†æ˜¯éšæœºç”Ÿæˆçš„ï¼Œæ„å‘³ç€è¿™é‡Œåªè¦æ˜¯å­˜åœ¨ç”¨æˆ·ä¿¡æ¯ï¼Œç¼“å­˜ä¸­çš„tokenæ˜¯å”¯ä¸€çš„")]),s._v(" "),t("p",[s._v("ä½†æ˜¯å¦‚æœæˆ‘è¦å†æ¬¡ç™»å½•ï¼Œå®ƒè¦ä¸redisä¸­çš„tokenè¿›è¡Œæ¯”å¯¹ï¼Œè€Œå› ä¸ºæˆ‘çš„tokenä¹Ÿæ˜¯éšæœºçš„ï¼Œé‚£ä¹ˆä¸¤ä¸ªtokenå¿…å®šä¼šä¸åŒï¼Œè¿™æ—¶å€™è‹¥æ˜¯æˆåŠŸå­˜å‚¨ï¼Œé‚£ä¹ˆç¼“å­˜ä¸­å°±ä¼šå­˜åœ¨ä¸¤ä¸ªkeyï¼Œè€Œè¿™ä¸¤ä¸ªkeyæ‰€å­˜å‚¨çš„ä¿¡æ¯åˆæ˜¯ç›¸åŒçš„ï¼Œè¿™å°±ä¸è¡Œäº†")]),s._v(" "),t("p",[s._v("æˆ‘è¯•äº†å¾ˆä¹…ï¼Œä½†è¿˜æ˜¯å¤±è´¥ï¼Œæœ€åé€€ä¸€æ­¥ï¼Œè¿˜æ˜¯ä»¥æ‰‹æœºå·ä½œä¸ºkeyçš„ç”¨æˆ·ä¿¡æ¯è¡¨ç¤º")])]),s._v(" "),t("p",[s._v("å¯ä»¥è½»æ˜“è·å–ï¼Œä¹Ÿæ›´å®¹æ˜“åŒºåˆ†ç”¨æˆ·ï¼Œç¼ºç‚¹ï¼šä¿¡æ¯æ³„éœ²")]),s._v(" "),t("p",[s._v("æ ¹æ®tokenkeyä»¥entriesæ–¹æ³•è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶å°†è¿™ä¸ªä»¥mapå½¢å¼å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯è½¬æˆjavaå¯¹è±¡ï¼Œä½¿ç”¨fillBeanWithMapæ–¹æ³•")]),s._v(" "),t("div",{staticClass:"language-coffeescript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-coffeescript"}},[t("code",[s._v("    Map"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Object"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" userMap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForHash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("entries")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tokenkey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("//5ã€å°†æŸ¥è¯¢åˆ°çš„hashæ•°æ®è½¬ä¸ºuserDTOå¯¹è±¡")]),s._v(" "),t("div",{staticClass:"language-reasonml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    UserDTO cacheuser = BeanUtil.fillBeanWithMap(userMap, new UserDTO(), false);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è®¾ç½®tokenæ—¶é—´ï¼šå¦‚æœæ—¶é—´è¶…è¿‡äº†30åˆ†é’Ÿï¼Œrediså°±ä¼šæŠŠä½ çš„ç™»å½•å‰”é™¤")]),s._v(" "),t("p",[s._v("è®¾ç½®Redisä¸­tokençš„æœ‰æ•ˆæœŸï¼Œä½ å¯ä»¥ä½¿ç”¨Redisçš„EXPIREå‘½ä»¤")]),s._v(" "),t("p",[s._v("//è®¾ç½®tokenæœ‰æ•ˆæœŸâ€”â€”åŠä¸ªå°æ—¶")]),s._v(" "),t("div",{staticClass:"language-angelscript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    stringRedisTemplate.expire\n     (tokenkey,LOGIN_USER_TTL, TimeUnit.MINUTES);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("å°†tokenKeyå’Œç”¨æˆ·ä¿¡æ¯ä»¥mapé›†åˆå½¢å¼å­˜å‚¨redisä¸­")]),s._v(" "),t("div",{staticClass:"language-reasonml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    stringRedisTemplate.opsForHash().putAll(tokenkey,userMap);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("opsForHash() æ–¹æ³•è¿”å›ä¸€ä¸ª HashOperations å¯¹è±¡ï¼Œå®ƒæä¾›äº†å¯¹ Redis å“ˆå¸Œè¡¨æ•°æ®ç»“æ„çš„æ“ä½œæ–¹æ³•ã€‚")]),s._v(" "),t("li",[s._v("putAll() æ–¹æ³•ç”¨äºå°†ä¸€ä¸ª Map ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹å­˜å‚¨åˆ° Redis çš„å“ˆå¸Œè¡¨ä¸­ã€‚åœ¨è¿™é‡Œï¼Œå®ƒå°†æ•´ä¸ª userMap å­˜å‚¨åˆ° Redis ä¸­ï¼Œå…¶ä¸­çš„é”®æ˜¯ tokenkeyã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_2-åˆ›å»ºç”¨æˆ·"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-åˆ›å»ºç”¨æˆ·"}},[s._v("#")]),s._v(" 2ï¼‰åˆ›å»ºç”¨æˆ·")]),s._v(" "),t("p",[s._v("è¿™é‡Œè¿˜è¦æ³¨æ„ï¼š")]),s._v(" "),t("p",[s._v("åˆ›å»ºç”¨æˆ·çš„æ–¹æ³•ï¼Œè¿™é‡Œçš„ä¸‰ä¸ªä¿¡æ¯å­—æ®µä¸èƒ½ä¸ºç©ºï¼Œä¸ç„¶ä¼šæŠ¥é”™")]),s._v(" "),t("div",{staticClass:"language-reasonml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    private User CreateUser(String phone) {\n         User user = new User();\n         user.setPhone(phone);\n         user.setNickName(USER_NICK_NAME_PREFIX+RandomUtil.randomString(10));\n         user.setIcon(LOGON_USER_ICON);\n         //ä¿å­˜ç”¨æˆ·\n         save(user);\n         return user;\n     }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("å› ä¸ºä¸çŸ¥é“æ€ä¹ˆè·å–éšæœºå¤´åƒï¼Œæ‰€ä»¥è¿™é‡Œæäº†ä¸€ä¸ªé»˜è®¤å¤´åƒ")]),s._v(" "),t("h3",{attrs:{id:"_3-rediså¸¸é‡ç±»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-rediså¸¸é‡ç±»"}},[s._v("#")]),s._v(" 3ï¼‰rediså¸¸é‡ç±»")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RedisContants")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGIN_CODE_KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login:code:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//éªŒè¯ç ä¿å­˜æ—¶é—´2åˆ†é’Ÿ")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGIN_CODE_TTL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2L")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGIN_USER_KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"login:token:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//tokenä¿å­˜æ—¶é—´30åˆ†é’Ÿ")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGIN_USER_TTL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30L")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("USER_NICK_NAME_PREFIX")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user_"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGON_USER_ICON")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://www.kdy.icu/images/touxiang.jpg"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"_4-controllerå±‚"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-controllerå±‚"}},[s._v("#")]),s._v(" 4ï¼‰Controllerå±‚")]),s._v(" "),t("p",[s._v("æ³¨è§£â€˜@NoRestFulApiå¯ä»¥è§£é™¤é‚£ä¸ªä¾èµ–çš„å°è£…ï¼Œä½¿ç”¨æˆ‘è‡ªå®šä¹‰çš„ç»“æœå¤„ç†ç±»Result")]),s._v(" "),t("div",{staticClass:"language-kotlin line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-kotlin"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token annotation builtin"}},[s._v("@PostMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/login"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token annotation builtin"}},[s._v("@NoRestFulApi")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" Result "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LoginFormDTO loginFormDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" HttpSession session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//1ã€é¦–å…ˆæ ¡éªŒæ‰‹æœºå·å’ŒéªŒè¯ç æ˜¯å¦åˆæ³•")]),s._v("\n         String phone "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" loginFormDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPhone")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("RegexUtils"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isPhoneInvalid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ‰‹æœºå·æ ¼å¼å¼‚å¸¸ï¼"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2ã€æ ¡éªŒéªŒè¯ç ")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//Object cachecode = session.getAttribute("code");')]),s._v("\n         String cachecode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" stringRedisTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("opsForValue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LOGIN_CODE_KEY "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" phone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n         String dtoCode "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" loginFormDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dtoCode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("dtoCode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("equals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cachecode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"éªŒè¯ç ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥ï¼"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n         UserDTO login "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" userService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("loginFormDTO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("login"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fail")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal singleline"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ç”¨æˆ·ä¿¡æ¯ä¸å­˜åœ¨ï¼"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ok")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("login"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h2",{attrs:{id:"_3ã€æµ‹è¯•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€æµ‹è¯•"}},[s._v("#")]),s._v(" 3ã€æµ‹è¯•")]),s._v(" "),t("p",[s._v("æˆ‘æ–°å»ºä¸€ä¸ªç”¨æˆ·")]),s._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311230843181.png",loading:"lazy"}})]),s._v(" "),t("p",[s._v("å¯ä»¥çœ‹åˆ°ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼Œå¹¶ä¸”åœ¨redisä¸­ä¹Ÿå­˜å‚¨äº†ç”¨æˆ·ä¿¡æ¯")]),s._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311230843756.png",loading:"lazy"}}),s._v(" ä¸‹é¢æˆ‘å†æ¬¡å‘é€éªŒè¯ç ï¼Œè§‚å¯Ÿä¼šä¸ä¼šå‡ºç°ç”¨æˆ·ä¿¡æ¯é‡å¤")]),s._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311230843104.png",loading:"lazy"}})]),s._v(" "),t("p",[s._v("å¯ä»¥çœ‹åˆ°ç”¨æˆ·ä¿¡æ¯å¹¶æœªé‡å¤")]),s._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311230843155.png",loading:"lazy"}})]),s._v(" "),t("p",[s._v("åŸºäºredisçš„çŸ­ä¿¡ç™»å½•å°±æ­¤ç»“æŸï¼ï¼")]),s._v(" "),t("p",[s._v("è¯´è¯´æˆ‘é‡åˆ°çš„é—®é¢˜ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("é€»è¾‘ä¸æ¸…æ™°å°±å¼€å§‹å†™ä»£ç ï¼Œç„¶åä¸æ–­çš„æŠ¥é”™ï¼Œä¸æ–­çš„debugï¼Œæœ€åå‘ç°é€»è¾‘æœ‰é—®é¢˜ï¼Œé‡æ–°æ€è€ƒé€»è¾‘ã€‚")]),s._v(" "),t("li",[s._v("è¢«å¯¹æ–¹çš„æ€è·¯å¸¦åã€‚é‡æ„å¤ç›˜çš„ç›®çš„æ˜¯ç†è§£ï¼Œå½¢æˆè‡ªå·±çš„ä¸€å¥—é€»è¾‘ï¼Œè€Œä¸æ˜¯è¢«åˆ«äººç‰µç€é¼»å­èµ°ã€‚åŒä¸€ä¸ªåŠŸèƒ½å¯ä»¥å®ç°çš„æ–¹æ³•ä¸æ­¢ä¸€ç§ï¼Œè€Œè‡ªå·±æ€è€ƒå‡ºæ¥çš„ï¼Œè‡³å°‘ç†è§£æ›´é€å½»ã€‚")]),s._v(" "),t("li",[s._v("redisåŸºç¡€ä¸ç‰¢å›ºï¼Œåœ¨ è·å–Keyå€¼å’Œuserå¯¹è±¡å­˜å‚¨è¾“å‡ºè¿™é‡Œæˆ‘èŠ±äº†å¾ˆå¤šæ—¶é—´ã€‚ å› ä¸ºè¿™ä¸ªåŠŸèƒ½æ˜¯é»‘é©¬ç‚¹è¯„ä¸­çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œè€Œè¿™ä¸ªåŠŸèƒ½åˆå’Œå…¶ä»–çš„åœ°æ–¹æœ‰ä¸€äº›è”ç³»ï¼Œå…¶ä¸­æ¶‰åŠåˆ°å…¶ä»–çš„ä¸€äº›çŸ¥è¯†ï¼Œæˆ‘è¿˜ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šã€‚æ¯”å¦‚è¯´ç™»å½•æ‹¦æˆªå™¨ï¼Œæˆ‘è¿™é‡Œå°±æ²¡æœ‰ç”¨åˆ°ã€‚ä¸ºä»€ä¹ˆæˆ‘ä¸ç”¨ï¼Œå› ä¸ºå¯¹äºå®ƒçš„æ€è·¯æˆ‘å¹¶ä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œ")])]),s._v(" "),t("p",[s._v("ç…§æ¬çš„è¯ï¼Œå°±ä¸ç¬¦åˆæˆ‘è‡ªå·±æ€è€ƒçš„è¿™ä¸ªåˆè¡·ï¼Œå¿…é¡»å¾—æ˜¯è‡ªå·±çš„ä¸œè¥¿ï¼è€Œä¸æ˜¯ä»åˆ«äººé‚£é‡Œå¤åˆ¶æ¥çš„åˆä¸æ‡‚ä»€ä¹ˆæ„æ€çš„ä»£ç ã€‚")]),s._v(" "),t("p",[s._v("æ‰€ä»¥ä»¥æˆ‘è‡ªå·±çš„æ€è·¯ï¼Œæˆ‘å°†åŸºäºRedisç”¨æˆ·çŸ­ä¿¡ç™»å½•çš„æ•´ä¸ªæµç¨‹è¿›è¡Œäº†å‰–æã€‚")])])}),[],!1,null,null,null);t.default=e.exports}}]);
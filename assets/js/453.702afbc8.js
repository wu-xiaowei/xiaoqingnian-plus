(window.webpackJsonp=window.webpackJsonp||[]).push([[453],{759:function(a,t,s){"use strict";s.r(t);var e=s(4),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"_3分钟-给女朋友做个云笔记"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3分钟-给女朋友做个云笔记"}},[a._v("#")]),a._v(" 3分钟，给女朋友做个云笔记！")]),a._v(" "),t("blockquote",[t("p",[a._v("本文作者："),t("a",{attrs:{href:"https://yuyuanweb.feishu.cn/wiki/Abldw5WkjidySxkKxU2cQdAtnah",target:"_blank",rel:"noopener noreferrer"}},[a._v("程序员鱼皮"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("本站地址："),t("a",{attrs:{href:"https://codefather.cn",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://codefather.cn"),t("OutboundLink")],1)])]),a._v(" "),t("p",[a._v("大家好，我是鱼皮，上期给大家分享了 "),t("a",{attrs:{href:"http://mp.weixin.qq.com/s?__biz=MzI1NDczNTAwMA==&mid=2247503596&idx=2&sn=1c2f4d1b16631e9a5036e7b7774cfa59&chksm=e9c2291bdeb5a00d680292395cd4e6d1c91ad30d2ae55f7295a77b5cd1ac38e9b6debf905fa6&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[a._v("6个开源笔记软件"),t("OutboundLink")],1),a._v(" ，并且让大家一起给这些软件打分。")]),a._v(" "),t("p",[a._v("结果得分最高的是 Leanote 云笔记，该项目在 GitHub 有上万个 star，先看一下效果：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919781.png",loading:"lazy"}})]),a._v(" "),t("p",[a._v("有了这个私有云笔记，你可以随时随地记录和分享内容，非常方便。")]),a._v(" "),t("p",[a._v("所以今天就手把手带大家搭建一下，整个过程非常简单，快的话 3 分钟就能完成，不需要什么专业知识，感兴趣的朋友可以跟着实践。")]),a._v(" "),t("blockquote",[t("p",[a._v("视频教程：https://www.bilibili.com/video/BV1134y1R72i/")])]),a._v(" "),t("h2",{attrs:{id:"搭建云笔记"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建云笔记"}},[a._v("#")]),a._v(" 搭建云笔记")]),a._v(" "),t("h3",{attrs:{id:"_0-准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_0-准备工作"}},[a._v("#")]),a._v(" 0. 准备工作")]),a._v(" "),t("p",[a._v("首先打开 Leanote 项目（https://github.com/leanote/leanote），从项目介绍文件中找到安装文档。")]),a._v(" "),t("p",[a._v("支持多种操作系统，有 Linux 服务器的同学可以直接装到服务器上，可以保证项目的 24 小时持续运行；没有的同学也可以直接在自己的电脑上安装。")]),a._v(" "),t("p",[a._v("支持安装包和源码安装两种方式，建议大家选择前者：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919750.png",loading:"lazy"}})]),a._v(" "),t("blockquote",[t("p",[a._v("安装文档")])]),a._v(" "),t("p",[a._v("下面我主要演示在 Linux 服务器上的安装方式。")]),a._v(" "),t("h3",{attrs:{id:"_1-下载项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载项目"}},[a._v("#")]),a._v(" 1. 下载项目")]),a._v(" "),t("p",[a._v("可以自行在安装文档中找到不同版本安装包的下载地址，然后手动下载到自己的电脑上，再传到服务器上。")]),a._v(" "),t("p",[a._v("当然，更简单的方式是，直接在服务器上使用 "),t("code",[a._v("wget")]),a._v(" 命令下载安装包：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wget https://udomain.dl.sourceforge.net/project/leanote-bin/2.6.1/leanote-linux-amd64-v2.6.1.bin.tar.gz \\\n--no-check-certificate\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("记得在命令后加上 "),t("code",[a._v("--no-check-certificate")]),a._v(" 选项，否则可能无法下载。")]),a._v(" "),t("p",[a._v("下载过程如图：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919811.png",loading:"lazy"}})]),a._v(" "),t("p",[a._v("下载安装包成功后，使用 "),t("code",[a._v("tar")]),a._v(" 命令解压即可：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -zxvf \\\nleanote-linux-amd64-v2.6.1.bin.tar.gz\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("然后使用 "),t("code",[a._v("ls")]),a._v(" 命令，就能看到解压出的项目目录了：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919747.png",loading:"lazy"}})]),a._v(" "),t("h3",{attrs:{id:"_2-启动数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动数据库"}},[a._v("#")]),a._v(" 2. 启动数据库")]),a._v(" "),t("p",[a._v("由于项目使用 "),t("code",[a._v("Mongodb")]),a._v(" 数据库去存储笔记资源，所以下面要安装它。")]),a._v(" "),t("h4",{attrs:{id:"_2-1-安装数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装数据库"}},[a._v("#")]),a._v(" 2.1 安装数据库")]),a._v(" "),t("p",[a._v("首先依然使用 wget 命令快速下载 Mongodb 安装包到自己的服务器（电脑）上：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.0.1.tgz\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("然后解压：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -xzvf \\\nmongodb-linux-x86_64-3.0.1.tgz\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("使用 ls 命令，能看到解压出的 mongodb 目录：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919744.png",loading:"lazy"}})]),a._v(" "),t("p",[a._v("接下来，要使用命令来启动数据库服务，但命令文件的位置在 mongodb 目录中，每次必须进入该目录才能执行，非常麻烦！")]),a._v(" "),t("p",[a._v("因此，可以修改 "),t("code",[a._v("/etc/profile")]),a._v(" 文件，给 mongodb 命令配置环境变量：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# 修改环境配置文件\nsudo vim /etc/profile\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("进入文本编辑器后，按方向键或者直接 "),t("code",[a._v("shift + g")]),a._v(" 到达文件底部，再按 "),t("code",[a._v("o")]),a._v(" 键新增一行，将你的 mongodb 位置补充到环境变量中：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("export PATH=$PATH:$HOME/mongodb-linux-x86_64-3.0.1/bin\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("如图：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919732.png",loading:"lazy"}})]),a._v(" "),t("blockquote",[t("p",[a._v("新增环境变量")])]),a._v(" "),t("p",[a._v("然后按 "),t("code",[a._v("esc")]),a._v(" 键，再输入 "),t("code",[a._v(":wq")]),a._v(" ，回车即可保存并退出编辑器：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919517.png",loading:"lazy"}})]),a._v(" "),t("blockquote",[t("p",[a._v("退出编辑器")])]),a._v(" "),t("p",[a._v("然后用 "),t("code",[a._v("source")]),a._v(" 命令激活配置：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("source /etc/profile\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h4",{attrs:{id:"_2-2-测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-测试"}},[a._v("#")]),a._v(" 2.2 测试")]),a._v(" "),t("p",[a._v("接下来，在当前目录下新建 "),t("code",[a._v("data")]),a._v(" 目录，用于存储数据文件：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mkdir data\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("使用 ls 命令查看新增的目录：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919545.png",loading:"lazy"}})]),a._v(" "),t("p",[a._v("然后用 "),t("code",[a._v("mongod")]),a._v(" 命令启动数据库，指定 data 目录为数据文件存放目录，记得加个 "),t("code",[a._v("$")]),a._v(" 符号，表示后台启动数据库：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mongod --dbpath data &\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("可以看到一大堆的启动信息：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919626.png",loading:"lazy"}})]),a._v(" "),t("blockquote",[t("p",[a._v("启动数据库")])]),a._v(" "),t("p",[a._v("然后输入 "),t("code",[a._v("mongo")]),a._v(" 命令，连接已启动的数据库：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mongo\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("可以输入 "),t("code",[a._v("show dbs")]),a._v(" 查看数据文件占用空间：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919585.png",loading:"lazy"}})]),a._v(" "),t("h3",{attrs:{id:"_3-导入数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-导入数据"}},[a._v("#")]),a._v(" 3. 导入数据")]),a._v(" "),t("p",[a._v("接下来要将 Leanote 应用的初始数据导入到数据库中，比如初始账号的名称、密码等。")]),a._v(" "),t("p",[a._v("使用 "),t("code",[a._v("mongorestore")]),a._v(" 命令，-h 参数指定连接本地数据库，-d 指定数据库名称，--dir 指定要导入的数据文件：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mongorestore -h localhost \\\n-d leanote \\\n--dir leanote/mongodb_backup/leanote_install_data/\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("导入成功后，再使用 mongo 命令连接数据库，可以看到已导入的集合和数据：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919672.png",loading:"lazy"}})]),a._v(" "),t("blockquote",[t("p",[a._v("已导入的数据")])]),a._v(" "),t("h3",{attrs:{id:"_4-修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-修改配置"}},[a._v("#")]),a._v(" 4. 修改配置")]),a._v(" "),t("p",[a._v("接下来，你可以修改应用的配置，比如启动的端口号、域名、安全秘钥等。")]),a._v(" "),t("p",[a._v("使用 vim 命令编辑 "),t("code",[a._v("${你的leanote路径}/conf/app.conf")]),a._v(" 文件即可：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919709.png",loading:"lazy"}})]),a._v(" "),t("blockquote",[t("p",[a._v("配置文件")])]),a._v(" "),t("p",[a._v("如果没特殊需求，这一步可以直接跳过。")]),a._v(" "),t("h3",{attrs:{id:"_5-启动应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动应用"}},[a._v("#")]),a._v(" 5. 启动应用")]),a._v(" "),t("p",[a._v("最后，进入项目的 bin 目录，执行启动脚本即可：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# 切换目录\ncd leanote/bin\n# 后台执行启动脚本\nbash run.sh &\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("看到一大堆输出，不用理会它：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919317.png",loading:"lazy"}})]),a._v(" "),t("p",[a._v("至此，项目已成功启动，在浏览器中输入 "),t("code",[a._v("http://${你的服务器地址或 localhost}:9000")]),a._v(" 就能访问云笔记啦，好好探索一番吧！")]),a._v(" "),t("p",[a._v("如果无法访问应用：")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("请使用 "),t("code",[a._v("netstat -ntlp")]),a._v(" 命令检查是否已有其他应用占用 "),t("code",[a._v("9000")]),a._v(" 端口。如果该端口已经被占用，可以在上一步中修改配置文件中的端口号，再重新启动。")])]),a._v(" "),t("li",[t("p",[a._v("请在进入服务器提供商的控制台，在防火墙中开放 9000 端口")])])]),a._v(" "),t("hr"),a._v(" "),t("p",[a._v("以上就是本期分享，有帮助的话还请给鱼皮一个 "),t("strong",[a._v("点赞 + 在看")]),a._v(" ，谢谢大家！")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pic.yupi.icu/5563/202311090919300.png",loading:"lazy"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);